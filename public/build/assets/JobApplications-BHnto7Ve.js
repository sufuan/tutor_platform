import{r as p,j as e,H as F,L as v,b as u}from"./app-DsllCRkg.js";import{A as P}from"./AuthenticatedLayout-C7FLhRCs.js";import{C as l,b as J,c as M,d as G,a as i}from"./card-5u8WTilj.js";import{B as a}from"./button-CoTJxXaf.js";import{B as m}from"./badge-B200-mJa.js";import{A as O,d as V,e as I}from"./sheet-3K8_wCSN.js";import{T as X,a as $,b as j,c as g}from"./tabs-7akIjqNY.js";import{D as b,a as y,b as C,c as w,d as A,e as S}from"./dialog-Br4z9Dnm.js";import"./textarea-BuKTeqfs.js";import{A as q}from"./arrow-left-Douxx5Ot.js";import{G as K}from"./graduation-cap-BRxnaSAU.js";import{M as Q}from"./map-pin-BdKcBnaD.js";import{D as U}from"./dollar-sign-Dnuw22R_.js";import{C as W}from"./calendar-BxaILTC_.js";import{E as Y}from"./eye-CRNGiFUP.js";import{S as Z}from"./star-Cv1X393k.js";import{C as D}from"./circle-x-DrYTQECN.js";import{C as ee}from"./circle-check-big-DMtVIVnt.js";import"./input-D-PX5_cd.js";import"./index-Cd5ZZqyH.js";import"./index-audHxnvk.js";import"./index-CCrlpGWa.js";import"./house-vDFQtZPY.js";import"./user-0eZu2NEE.js";import"./file-text-CnOATaiY.js";import"./search-AC4RCcwv.js";import"./users-CCfAm_xt.js";import"./book-open-C4UPpF1Q.js";import"./mail-BNel7RtU.js";import"./check-DGBoWBRM.js";import"./circle-OtpwoAGW.js";function Be({auth:se,job:n,applications:c}){const[N,d]=p.useState(null),[H,o]=p.useState(!1),[_,x]=p.useState(!1),r={pending:c.filter(s=>s.status==="pending"),shortlisted:c.filter(s=>s.status==="shortlisted"),accepted:c.filter(s=>s.status==="accepted"),rejected:c.filter(s=>s.status==="rejected")},k=s=>{u.post(route("guardian.applications.shortlist",s))},R=s=>{d(s),o(!0)},T=()=>{u.post(route("guardian.applications.hire",N),{},{onSuccess:()=>{o(!1),d(null)}})},f=s=>{d(s),x(!0)},B=()=>{u.post(route("guardian.applications.reject",N),{},{onSuccess:()=>{x(!1),d(null)}})},z=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",shortlisted:"bg-blue-100 text-blue-800 border-blue-200",accepted:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",h=({application:s})=>{const t=s.tutor;return e.jsx(l,{className:"hover:shadow-lg transition-shadow",children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(O,{className:"h-16 w-16",children:[e.jsx(V,{src:t.photo}),e.jsxs(I,{children:[t.first_name?.[0],t.last_name?.[0]]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[t.first_name," ",t.last_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.tutor_code})]}),e.jsx(m,{variant:"outline",className:z(s.status),children:s.status})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.institution," - ",t.education_level]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:t.location?.name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsxs("span",{children:["৳",t.hourly_rate,"/hour"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.experience_years," years experience"]})]})]}),t.subjects&&t.subjects.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[t.subjects.slice(0,4).map((L,E)=>e.jsx(m,{variant:"secondary",className:"text-xs",children:L},E)),t.subjects.length>4&&e.jsxs(m,{variant:"secondary",className:"text-xs",children:["+",t.subjects.length-4]})]}),s.cover_letter&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg mb-4",children:e.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:s.cover_letter})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(v,{href:route("tutors.show",t.id),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"View Profile"]})}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{size:"sm",onClick:()=>k(s.id),children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Shortlist"]}),e.jsxs(a,{variant:"destructive",size:"sm",onClick:()=>f(s.id),children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),s.status==="shortlisted"&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{size:"sm",onClick:()=>R(s.id),children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Hire"]}),e.jsxs(a,{variant:"destructive",size:"sm",onClick:()=>f(s.id),children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Reject"]})]})]})]})]})})})};return e.jsxs(P,{children:[e.jsx(F,{title:`Applications for ${n.title}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx(a,{variant:"ghost",asChild:!0,className:"mb-6",children:e.jsxs(v,{href:route("guardian.jobs.index"),children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Back to My Jobs"]})}),e.jsxs(l,{className:"mb-6",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(M,{className:"text-2xl",children:n.title}),e.jsxs(G,{children:["Job Code: ",n.job_code," • ",c.length," Applications"]})]}),e.jsxs(m,{variant:"outline",className:"text-lg",children:["৳",n.salary,"/month"]})]})}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.pending.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Pending"})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.shortlisted.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Shortlisted"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.accepted.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Hired"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:r.rejected.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"Rejected"})]})]})})]}),e.jsxs(X,{defaultValue:"pending",className:"space-y-4",children:[e.jsxs($,{className:"grid w-full grid-cols-4",children:[e.jsxs(j,{value:"pending",children:["Pending (",r.pending.length,")"]}),e.jsxs(j,{value:"shortlisted",children:["Shortlisted (",r.shortlisted.length,")"]}),e.jsxs(j,{value:"accepted",children:["Hired (",r.accepted.length,")"]}),e.jsxs(j,{value:"rejected",children:["Rejected (",r.rejected.length,")"]})]}),e.jsx(g,{value:"pending",className:"space-y-4",children:r.pending.length===0?e.jsx(l,{children:e.jsx(i,{className:"pt-6 text-center text-gray-500",children:"No pending applications"})}):r.pending.map(s=>e.jsx(h,{application:s},s.id))}),e.jsx(g,{value:"shortlisted",className:"space-y-4",children:r.shortlisted.length===0?e.jsx(l,{children:e.jsx(i,{className:"pt-6 text-center text-gray-500",children:"No shortlisted applications"})}):r.shortlisted.map(s=>e.jsx(h,{application:s},s.id))}),e.jsx(g,{value:"accepted",className:"space-y-4",children:r.accepted.length===0?e.jsx(l,{children:e.jsx(i,{className:"pt-6 text-center text-gray-500",children:"No hired tutors yet"})}):r.accepted.map(s=>e.jsx(h,{application:s},s.id))}),e.jsx(g,{value:"rejected",className:"space-y-4",children:r.rejected.length===0?e.jsx(l,{children:e.jsx(i,{className:"pt-6 text-center text-gray-500",children:"No rejected applications"})}):r.rejected.map(s=>e.jsx(h,{application:s},s.id))})]})]})}),e.jsx(b,{open:H,onOpenChange:o,children:e.jsxs(y,{children:[e.jsxs(C,{children:[e.jsx(w,{children:"Confirm Hiring"}),e.jsx(A,{children:"Are you sure you want to hire this tutor? This action will close the job posting."})]}),e.jsxs(S,{children:[e.jsx(a,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(a,{onClick:T,children:"Confirm Hire"})]})]})}),e.jsx(b,{open:_,onOpenChange:x,children:e.jsxs(y,{children:[e.jsxs(C,{children:[e.jsx(w,{children:"Confirm Rejection"}),e.jsx(A,{children:"Are you sure you want to reject this application?"})]}),e.jsxs(S,{children:[e.jsx(a,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:B,children:"Reject Application"})]})]})})]})}export{Be as default};
