import{r as v,a as k,j as e}from"./app-D56fJV5T.js";import{A as F}from"./AuthenticatedLayout-CrVtqVnZ.js";import{B as c}from"./button-Anm0rw7C.js";import{C as _,a as b,b as X,c as D,d as E}from"./card-CaHjWWI2.js";import{I as m}from"./input-C8WkwJhz.js";import{L as d}from"./label-ElrJrBNL.js";import{T as A}from"./textarea-C2raOctS.js";import"./select-DzfyFF8y.js";import{C as B}from"./checkbox-DmXHEV1k.js";import{B as T}from"./badge-D8nhticf.js";import{P as H}from"./progress-CaME9bhw.js";import{L as I}from"./LocationDropdown-Dm-YVLLM.js";import{C as R}from"./circle-check-big-DiDJhQZx.js";import"./sheet-oq0FYnNn.js";import"./index-lrQDdO9O.js";import"./index-c4AsyinG.js";import"./check-Cx1Mx1zP.js";import"./circle-CvvHGmbE.js";import"./index-CJvPRITM.js";import"./house-BDAGjlcm.js";import"./user-DX-xlDTS.js";import"./file-text-JxuxQrBK.js";import"./search-BwhiQN7a.js";import"./users-DR05EF0h.js";import"./book-open-DYVn_e5B.js";import"./mail-DsaBw_vr.js";import"./index-Z4kZKxRg.js";import"./chevron-down-IPUApeqR.js";function ue({guardian:a={},locations:$=[],subjects:n=[],categories:G=[]}){const[t,p]=v.useState(1),[N,x]=v.useState(!1),f=4,{data:r,setData:i,post:C,processing:h,errors:l}=k({first_name:a?.first_name||"",last_name:a?.last_name||"",phone:a?.phone||"",division:a?.division||"",district:a?.district||"",detailed_address:a?.detailed_address||"",preferred_subjects:a?.preferred_subjects||[],preferred_class_levels:a?.preferred_class_levels||[]}),g=["Play","Nursery","KG","Class 1","Class 2","Class 3","Class 4","Class 5","Class 6","Class 7","Class 8","Class 9","Class 10","SSC","HSC","A Level","O Level"],u=()=>{let s=0;return r.first_name&&s++,r.last_name&&s++,r.phone&&s++,r.division&&s++,r.district&&s++,r.detailed_address&&s++,r.preferred_subjects.length>0&&s++,r.preferred_class_levels.length>0&&s++,Math.round(s/8*100)},y=s=>{if(s.preventDefault(),!N){console.log("Form submission blocked - Complete Profile button not clicked");return}console.log("Form submitted with data:",r),C(route("guardian.profile.complete.store"),{preserveScroll:!0,onSuccess:()=>{console.log("Profile completed successfully")},onError:o=>{console.log("Form errors:",o),x(!1)}})},S=s=>{x(!0)},P=()=>{t<f&&p(t+1)},w=()=>{t>1&&p(t-1)},j=[{number:1,title:"Personal Info"},{number:2,title:"Location"},{number:3,title:"Address"},{number:4,title:"Preferences"}];return e.jsx(F,{header:e.jsx("h2",{className:"font-heading text-xl font-semibold text-gray-800",children:"Complete Your Profile"}),children:e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(_,{className:"mb-8",children:e.jsxs(b,{className:"pt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm font-medium text-primary-blue",children:[u(),"%"]})]}),e.jsx(H,{value:u(),className:"h-3"})]}),e.jsx("div",{className:"flex justify-between mt-6",children:j.map(s=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${t>=s.number?"border-primary-blue bg-primary-blue text-white":"border-gray-300 text-gray-400"}`,children:t>s.number?e.jsx(R,{className:"h-6 w-6"}):e.jsx("span",{children:s.number})}),e.jsx("span",{className:"text-xs mt-2 text-center",children:s.title})]},s.number))})]})}),e.jsxs(_,{children:[e.jsxs(X,{children:[e.jsxs(D,{children:["Step ",t,": ",j[t-1].title]}),e.jsxs(E,{children:[t===1&&"Enter your personal information",t===2&&"Select your location",t===3&&"Provide your detailed address",t===4&&"Set your preferences for tutors"]})]}),e.jsx(b,{children:e.jsxs("form",{onSubmit:y,className:"space-y-6",onKeyDown:s=>{s.key==="Enter"&&s.target.tagName!=="TEXTAREA"&&s.preventDefault()},children:[t===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"first_name",children:"First Name *"}),e.jsx(m,{id:"first_name",value:r.first_name,onChange:s=>i("first_name",s.target.value),className:"mt-1"}),l.first_name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.first_name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"last_name",children:"Last Name *"}),e.jsx(m,{id:"last_name",value:r.last_name,onChange:s=>i("last_name",s.target.value),className:"mt-1"}),l.last_name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.last_name})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(m,{id:"phone",type:"tel",placeholder:"01XXXXXXXXX",value:r.phone,onChange:s=>i("phone",s.target.value),className:"mt-1"}),l.phone&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.phone})]})]}),t===2&&e.jsxs("div",{children:[e.jsx(d,{children:"Location *"}),e.jsx(I,{divisionValue:r.division,districtValue:r.district,onDivisionChange:s=>i("division",s),onDistrictChange:s=>i("district",s),divisionError:l.division,districtError:l.district})]}),t===3&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"detailed_address",children:"Detailed Address *"}),e.jsx(A,{id:"detailed_address",placeholder:"House no, Road no, Area...",value:r.detailed_address,onChange:s=>i("detailed_address",s.target.value),rows:4,className:"mt-1"}),l.detailed_address&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.detailed_address})]}),t===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Preferred Subjects *"}),e.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Select subjects you prefer tutors for"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n&&n.length>0?n.map(s=>e.jsx(T,{variant:r.preferred_subjects.includes(s.id)?"default":"outline",className:"cursor-pointer px-3 py-1.5 transition-colors",onClick:()=>{r.preferred_subjects.includes(s.id)?i("preferred_subjects",r.preferred_subjects.filter(o=>o!==s.id)):i("preferred_subjects",[...r.preferred_subjects,s.id])},children:s.name},s.id)):e.jsx("p",{className:"text-sm text-slate-500",children:"No subjects available"})}),l.preferred_subjects&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.preferred_subjects})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Preferred Class Levels *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2",children:g.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:`level-${s}`,checked:r.preferred_class_levels.includes(s),onCheckedChange:o=>{o?i("preferred_class_levels",[...r.preferred_class_levels,s]):i("preferred_class_levels",r.preferred_class_levels.filter(L=>L!==s))}}),e.jsx(d,{htmlFor:`level-${s}`,className:"text-sm font-normal cursor-pointer",children:s})]},s))}),l.preferred_class_levels&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.preferred_class_levels})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx("div",{children:t>1&&e.jsx(c,{type:"button",variant:"outline",onClick:w,children:"Previous"})}),e.jsx("div",{className:"flex gap-3",children:t<f?e.jsx(c,{type:"button",onClick:P,children:"Next"}):e.jsx(c,{type:"submit",disabled:h,className:"bg-success hover:bg-success/90",onClick:S,children:h?"Saving...":"Complete Profile"})})]})]})})]})]})})})}export{ue as default};
