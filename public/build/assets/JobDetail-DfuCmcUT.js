import{r as V,a as P,j as e,H as F,b as L}from"./app-UnORaCWC.js";import{u as T,A as q}from"./AuthenticatedLayout-jxWAx8od.js";import{C as j,b as u,c as f,d as B,a as v}from"./card-BFCx7L5a.js";import{B as t}from"./button-DzJam9vP.js";import{B as N}from"./badge-C4PyXV34.js";import{D as M,a as E,b as H,c as J,d as R,e as Y}from"./dialog-CMGGOJJR.js";import{T as G}from"./textarea-DKEGDsF2.js";import{L as o}from"./label-ClHufa5K.js";import{I as g}from"./input-C0xnu9e5.js";import{A as I,a as z}from"./alert-CRCZM6Np.js";import{A as O}from"./arrow-left-CD3jTHtC.js";import{C as y}from"./circle-check-BU2Rob9t.js";import{D as U}from"./dollar-sign-DybwnY84.js";import{C as W}from"./calendar-jAtypkxu.js";import{C as $}from"./clock-_oPVlCrX.js";import{M as _}from"./map-pin-CZ0oeOj6.js";import{U as K}from"./user-C5TLaqEO.js";import{P as Q}from"./phone-DFw4lyPu.js";import{S as X}from"./send-mEcwn7TL.js";import{F as Z}from"./file-text-DHNQe8cc.js";import{E as ee}from"./external-link-gHlizMlS.js";import"./sheet-DDRvhggp.js";import"./index-7cF4LDRI.js";import"./index-Ife7G5qO.js";import"./check-CTHw5CeN.js";import"./circle-BG3TZKCr.js";import"./index-BOLzFKWm.js";import"./house-C8R6Tsiv.js";import"./search-bCyjJofm.js";import"./users-t6Ic-FIO.js";import"./book-open-CgBzRqaM.js";import"./mail-CV7L7uRf.js";function Le({auth:C,job:s}){const[b,i]=V.useState(!1),l=C.tutor,m=l?.cv_path,c=l?.verification_status,{toast:w}=T(),{data:n,setData:d,post:D,processing:x,reset:p,errors:r}=P({cover_letter:"",cv_path:null}),A=()=>{if(c!=="verified"){w({variant:"destructive",title:"Verification Required",description:"You must be verified before applying to jobs. Please complete the verification process."});return}i(!0)},S=a=>{a.preventDefault(),D(route("tutor.jobs.apply",s.id),{onSuccess:()=>{i(!1),p()},forceFormData:!0})},h=s.applications?.some(a=>a.tutor_id===l?.id);return e.jsxs(q,{children:[e.jsx(F,{title:s.title}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(t,{variant:"ghost",className:"mb-4",onClick:()=>L.visit(route("tutor.jobs")),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Back to Jobs"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(j,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(f,{className:"text-2xl mb-2",children:s.title}),e.jsxs(B,{children:["Posted on ",new Date(s.created_at).toLocaleDateString()]})]}),h&&e.jsxs(N,{className:"bg-green-100 text-green-800",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Applied"]})]})}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Salary"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["à§³",s.salary,"/month"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Days per Week"}),e.jsxs("p",{className:"font-semibold",children:[s.days_per_week," days"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Session Duration"}),e.jsxs("p",{className:"font-semibold",children:[s.duration_per_session," mins"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Location"}),e.jsx("p",{className:"font-semibold",children:s.location?.city})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:s.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Required Subjects"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(s.subject_names)&&s.subject_names.map((a,k)=>e.jsx(N,{variant:"secondary",children:a},k))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Additional Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Class Level"}),e.jsx("p",{className:"font-medium",children:s.class_level})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Education Medium"}),e.jsx("p",{className:"font-medium",children:s.education_medium})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Tuition Type"}),e.jsx("p",{className:"font-medium",children:s.tuition_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Gender Preference"}),e.jsx("p",{className:"font-medium capitalize",children:s.gender_preference||"Any"})]})]})]}),s.additional_requirements&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Additional Requirements"}),e.jsx("p",{className:"text-slate-700",children:s.additional_requirements})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(j,{className:"sticky top-6",children:[e.jsx(u,{children:e.jsx(f,{children:"Guardian Information"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(K,{className:"h-6 w-6 text-slate-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[s.guardian?.first_name," ",s.guardian?.last_name]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Guardian"})]})]}),s.guardian?.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Q,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:s.guardian.phone})]}),s.guardian?.address&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(_,{className:"h-4 w-4 text-slate-500 mt-0.5"}),e.jsx("span",{children:s.guardian.address})]}),h?e.jsxs(I,{className:"mt-4 bg-green-50 border-green-200",children:[e.jsx(y,{className:"h-4 w-4 text-green-600"}),e.jsx(z,{className:"text-green-800",children:"You have already applied for this job"})]}):e.jsxs(t,{className:"w-full mt-4",onClick:A,disabled:c!=="verified",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Apply for this Job"]}),c!=="verified"&&e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"* Verification required to apply"})]})]})})]})]})}),e.jsx(M,{open:b,onOpenChange:i,children:e.jsxs(E,{className:"max-w-2xl",children:[e.jsxs(H,{children:[e.jsx(J,{children:"Apply for Job"}),e.jsx(R,{children:s.title})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"cover_letter",children:"Cover Letter *"}),e.jsx(G,{id:"cover_letter",placeholder:"Write a brief introduction about yourself and why you're a good fit for this position...",rows:6,value:n.cover_letter,onChange:a=>d("cover_letter",a.target.value),required:!0}),r.cover_letter&&e.jsx("p",{className:"text-sm text-red-500",children:r.cover_letter})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Curriculum Vitae (CV)"}),m?e.jsxs("div",{className:"border rounded-lg p-4 bg-slate-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-slate-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Your CV from Profile"}),e.jsx("p",{className:"text-xs text-slate-500",children:"This CV will be attached to your application"})]})]}),e.jsxs(t,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${m}`,"_blank"),children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),"View CV"]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx(o,{htmlFor:"cv_upload",className:"text-sm text-slate-600",children:"Or upload a different CV (PDF only, max 5MB)"}),e.jsx(g,{id:"cv_upload",type:"file",accept:".pdf",className:"mt-2",onChange:a=>d("cv_path",a.target.files[0])}),n.cv_path&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["New CV selected: ",n.cv_path.name]})]})]}):e.jsxs("div",{children:[e.jsx(g,{id:"cv_upload",type:"file",accept:".pdf",onChange:a=>d("cv_path",a.target.files[0]),required:!0}),e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"You haven't uploaded a CV in your profile. Please upload one here (PDF only, max 5MB)"})]}),r.cv_path&&e.jsx("p",{className:"text-sm text-red-500",children:r.cv_path})]}),e.jsxs(Y,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>{i(!1),p()},children:"Cancel"}),e.jsx(t,{type:"submit",disabled:x,children:x?"Submitting...":"Submit Application"})]})]})]})})]})}export{Le as default};
