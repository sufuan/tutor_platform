import{r as _,j as e,H as A,a as T}from"./app-B63PtWLD.js";import{A as S}from"./AuthenticatedLayout-Dvnz6xi2.js";import{C as t,a as m,b as x,c as a}from"./card-BmOj17mn.js";import{B as o}from"./button-DV66Woy4.js";import{B as N}from"./badge-CptsXR4E.js";import{T as k,a as B,b as p,c as b}from"./tabs-DnLFZ-67.js";import{T as y,a as R}from"./thumbs-up-bPwZZRRG.js";import{U as z}from"./user-hj4MECco.js";import{B as D,F as E}from"./file-text-Bimclqna.js";import{C as f}from"./circle-check-big-BhrD6QlP.js";import{C as w}from"./circle-x-CzRyFyg0.js";import"./sheet-lUi-JFXN.js";import"./index-B3FaZpoj.js";import"./index-D3bRAgg9.js";import"./check-BgUT7JlC.js";import"./circle-CKE4H3am.js";import"./input-7u4n2Okz.js";import"./index-fjpr62jj.js";import"./house-BoNy_Mq9.js";import"./search-D6E_4M0f.js";import"./users-DI88Xr7j.js";import"./book-open-Be65WJkb.js";import"./mail-D8OkAqz4.js";function de({auth:L,applications:g,stats:l}){const[h,v]=_.useState(null),j=(s,r)=>{confirm(`Are you sure you want to ${r} this application?`)&&(v(s),T.post(route("admin.applications.update-status",s),{status:r},{preserveScroll:!0,onFinish:()=>v(null)}))},C=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",shortlisted:"bg-blue-100 text-blue-800 border-blue-200",accepted:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",i={pending:g.filter(s=>s.status==="pending"),shortlisted:g.filter(s=>s.status==="shortlisted"),accepted:g.filter(s=>s.status==="accepted"),rejected:g.filter(s=>s.status==="rejected")},u=({application:s})=>{const r=s.tutor,d=s.job,n=d?.guardian,c=s.guardian_recommendations&&s.guardian_recommendations.length>0?s.guardian_recommendations[0]:null;return e.jsxs(t,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(N,{variant:"outline",className:C(s.status),children:s.status}),e.jsx(N,{variant:"secondary",children:new Date(s.applied_at).toLocaleDateString()})]}),c&&e.jsx("div",{className:`mt-2 p-3 rounded-lg border-l-4 text-sm ${c.recommendation_type==="hire"?"bg-green-50 border-green-500 text-green-800":"bg-orange-50 border-orange-500 text-orange-800"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[c.recommendation_type==="hire"?e.jsx(y,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}):e.jsx(R,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:c.recommendation_type==="hire"?"✓ Guardian Recommends Hiring":"✗ Guardian Not Interested"}),e.jsx("p",{className:"text-xs mt-1 opacity-90",children:c.message}),e.jsx("p",{className:"text-xs mt-1 opacity-75",children:new Date(c.created_at).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})}),e.jsxs(x,{className:"text-lg mt-3",children:["Application #",s.id]})]}),e.jsxs(a,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-sm text-blue-600 border-b pb-2",children:[e.jsx(z,{className:"inline h-4 w-4 mr-1"}),"Tutor Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"})," ",e.jsx("a",{href:route("admin.tutors.view",r?.id),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline",children:r?.user?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"})," ",e.jsx("span",{className:"font-medium",children:r?.user?.email})]}),r?.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",e.jsx("span",{className:"font-medium",children:r.phone})]}),r?.hourly_rate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expected Salary:"})," ",e.jsxs("span",{className:"font-medium text-green-600",children:["৳",r.hourly_rate,"/month"]})]}),r?.education&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Education:"})," ",e.jsx("span",{className:"font-medium",children:r.education})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Verification:"})," ",e.jsx(N,{variant:"outline",className:"ml-1 text-xs",children:r?.verification_status})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-sm text-green-600 border-b pb-2",children:[e.jsx(D,{className:"inline h-4 w-4 mr-1"}),"Job Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Title:"})," ",e.jsx("a",{href:route("admin.jobs.view",d?.id),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline",children:d?.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Code:"})," ",e.jsx("span",{className:"font-medium",children:d?.job_code})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Salary:"})," ",e.jsxs("span",{className:"font-medium text-green-600",children:["৳",d?.salary,"/month"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"})," ",e.jsx("span",{className:"font-medium",children:d?.district&&d?.division?`${d.district}, ${d.division}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Posted By:"})," ",n?e.jsxs("span",{className:"font-medium",children:["Guardian:"," ",e.jsx("a",{href:route("admin.guardians.view",n.id),className:"text-blue-600 hover:text-blue-800 hover:underline",children:n.first_name||n.user?.name||"N/A"})]}):e.jsx("span",{className:"font-medium",children:"Admin"})]}),n?.user?.email&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Guardian Email:"})," ",e.jsx("span",{className:"font-medium",children:n.user.email})]})]})]})]}),s.cover_letter&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Cover Letter"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded",children:s.cover_letter})]}),s.status==="pending"&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex gap-2",children:[e.jsxs(o,{size:"sm",variant:"outline",className:"text-blue-600 border-blue-600 hover:bg-blue-50",onClick:()=>j(s.id,"shortlisted"),disabled:h===s.id,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Shortlist"]}),e.jsxs(o,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>j(s.id,"accepted"),disabled:h===s.id,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsxs(o,{size:"sm",variant:"destructive",onClick:()=>j(s.id,"rejected"),disabled:h===s.id,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),s.status==="shortlisted"&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex gap-2",children:[e.jsxs(o,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>j(s.id,"accepted"),disabled:h===s.id,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsxs(o,{size:"sm",variant:"destructive",onClick:()=>j(s.id,"rejected"),disabled:h===s.id,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),s.cv_path&&e.jsx("div",{className:"mt-3",children:e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>window.open(`/storage/${s.cv_path}`,"_blank"),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"View CV"]})})]})]})};return e.jsxs(S,{children:[e.jsx(A,{title:"Job Applications"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Job Applications"}),e.jsx("p",{className:"text-gray-600",children:"View all tutor applications to guardian jobs"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs(t,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Total"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:l.total})})]}),e.jsxs(t,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Pending"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.pending})})]}),e.jsxs(t,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Shortlisted"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.shortlisted})})]}),e.jsxs(t,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Accepted"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.accepted})})]}),e.jsxs(t,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Rejected"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.rejected})})]})]}),e.jsxs(k,{defaultValue:"pending",className:"space-y-4",children:[e.jsxs(B,{children:[e.jsxs(p,{value:"pending",className:"relative",children:["Pending",l.pending>0&&e.jsx(N,{className:"ml-2 bg-yellow-500",children:l.pending})]}),e.jsx(p,{value:"shortlisted",children:"Shortlisted"}),e.jsx(p,{value:"accepted",children:"Accepted"}),e.jsx(p,{value:"rejected",children:"Rejected"})]}),e.jsx(b,{value:"pending",className:"space-y-4",children:i.pending.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.pending.map(s=>e.jsx(u,{application:s},s.id))}):e.jsx(t,{children:e.jsx(a,{className:"text-center py-12 text-gray-500",children:"No pending applications"})})}),e.jsx(b,{value:"shortlisted",className:"space-y-4",children:i.shortlisted.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.shortlisted.map(s=>e.jsx(u,{application:s},s.id))}):e.jsx(t,{children:e.jsx(a,{className:"text-center py-12 text-gray-500",children:"No shortlisted applications"})})}),e.jsx(b,{value:"accepted",className:"space-y-4",children:i.accepted.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.accepted.map(s=>e.jsx(u,{application:s},s.id))}):e.jsx(t,{children:e.jsx(a,{className:"text-center py-12 text-gray-500",children:"No accepted applications"})})}),e.jsx(b,{value:"rejected",className:"space-y-4",children:i.rejected.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.rejected.map(s=>e.jsx(u,{application:s},s.id))}):e.jsx(t,{children:e.jsx(a,{className:"text-center py-12 text-gray-500",children:"No rejected applications"})})})]})]})})]})}export{de as default};
