import{r as v,a as F,j as e,H as M,b as w}from"./app-DsllCRkg.js";import{A as O}from"./AuthenticatedLayout-C7FLhRCs.js";import{C as a,b as x,c as m,a as r,d as U}from"./card-5u8WTilj.js";import{B as i}from"./button-CoTJxXaf.js";import{B as p}from"./badge-B200-mJa.js";import{D as C,a as _,b as R,c as D,d as T,e as A}from"./dialog-Br4z9Dnm.js";import{T as V}from"./textarea-BuKTeqfs.js";import{L as X}from"./label-C3nxLCEe.js";import{T as G,a as I,b as u,c as N}from"./tabs-7akIjqNY.js";import{E as K}from"./eye-CRNGiFUP.js";import{U as Q}from"./user-0eZu2NEE.js";import{M as W}from"./map-pin-BdKcBnaD.js";import{D as Y}from"./dollar-sign-Dnuw22R_.js";import{C as Z}from"./calendar-BxaILTC_.js";import{B as $}from"./file-text-CnOATaiY.js";import{C as q}from"./circle-check-big-DMtVIVnt.js";import{C as ee}from"./circle-x-DrYTQECN.js";import"./sheet-3K8_wCSN.js";import"./index-audHxnvk.js";import"./index-Cd5ZZqyH.js";import"./check-DGBoWBRM.js";import"./circle-OtpwoAGW.js";import"./input-D-PX5_cd.js";import"./index-CCrlpGWa.js";import"./house-vDFQtZPY.js";import"./search-AC4RCcwv.js";import"./users-CCfAm_xt.js";import"./book-open-C4UPpF1Q.js";import"./mail-BNel7RtU.js";function Be({auth:se,jobRequests:j,stats:l}){const[n,c]=v.useState(null),[S,o]=v.useState(!1),[k,d]=v.useState(!1),{data:h,setData:B,post:ae,processing:f,reset:b}=F({rejection_reason:""}),E=s=>{c(s),o(!0)},J=()=>{w.post(route("admin.tutor-job-requests.approve",n.id),{},{onSuccess:()=>{o(!1),c(null)}})},L=s=>{c(s),d(!0)},P=()=>{w.post(route("admin.tutor-job-requests.reject",n.id),{rejection_reason:h.rejection_reason},{onSuccess:()=>{d(!1),c(null),b()}})},H=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",t={pending:j.filter(s=>s.approval_status==="pending"),approved:j.filter(s=>s.approval_status==="approved"),rejected:j.filter(s=>s.approval_status==="rejected")},g=({request:s})=>e.jsxs(a,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(x,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(p,{variant:"outline",className:H(s.approval_status),children:s.approval_status}),e.jsxs(p,{variant:"secondary",children:[e.jsx(K,{className:"h-3 w-3 mr-1"}),s.views," views"]})]}),e.jsx(m,{className:"text-xl",children:s.title}),e.jsxs(U,{children:["Posted on ",new Date(s.created_at).toLocaleDateString()]})]})})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-slate-500"}),e.jsxs("span",{className:"font-medium",children:[s.tutor?.user?.first_name," ",s.tutor?.user?.last_name]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.district,", ",s.division]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["à§³",s.monthly_salary,"/month"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:s.available_days?.join(", ")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"capitalize",children:s.teaching_mode})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.subject_names?.map((y,z)=>e.jsx(p,{variant:"secondary",className:"text-xs",children:y},z))}),s.rejection_reason&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-800",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",s.rejection_reason]}),s.approval_status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(i,{size:"sm",variant:"outline",className:"flex-1 border-green-500 text-green-600 hover:bg-green-50",onClick:()=>E(s),children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(i,{size:"sm",variant:"outline",className:"flex-1 border-red-500 text-red-600 hover:bg-red-50",onClick:()=>L(s),children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]});return e.jsxs(O,{children:[e.jsx(M,{title:"Tutor Job Requests"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tutor Job Requests"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve tutor service listings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(a,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Pending"})}),e.jsx(r,{children:e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:l.pending})})]}),e.jsxs(a,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Approved"})}),e.jsx(r,{children:e.jsx("div",{className:"text-3xl font-bold text-green-600",children:l.approved})})]}),e.jsxs(a,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Rejected"})}),e.jsx(r,{children:e.jsx("div",{className:"text-3xl font-bold text-red-600",children:l.rejected})})]})]}),e.jsxs(G,{defaultValue:"pending",className:"space-y-4",children:[e.jsxs(I,{children:[e.jsxs(u,{value:"pending",className:"relative",children:["Pending",l.pending>0&&e.jsx(p,{className:"ml-2 bg-yellow-500",children:l.pending})]}),e.jsx(u,{value:"approved",children:"Approved"}),e.jsx(u,{value:"rejected",children:"Rejected"})]}),e.jsx(N,{value:"pending",className:"space-y-4",children:t.pending.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.pending.map(s=>e.jsx(g,{request:s},s.id))}):e.jsx(a,{children:e.jsx(r,{className:"text-center py-12 text-gray-500",children:"No pending requests"})})}),e.jsx(N,{value:"approved",className:"space-y-4",children:t.approved.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.approved.map(s=>e.jsx(g,{request:s},s.id))}):e.jsx(a,{children:e.jsx(r,{className:"text-center py-12 text-gray-500",children:"No approved requests"})})}),e.jsx(N,{value:"rejected",className:"space-y-4",children:t.rejected.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.rejected.map(s=>e.jsx(g,{request:s},s.id))}):e.jsx(a,{children:e.jsx(r,{className:"text-center py-12 text-gray-500",children:"No rejected requests"})})})]})]})}),e.jsx(C,{open:S,onOpenChange:o,children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(D,{children:"Approve Job Request"}),e.jsxs(T,{children:['Are you sure you want to approve "',n?.title,'"?']})]}),e.jsxs(A,{children:[e.jsx(i,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(i,{onClick:J,disabled:f,children:"Approve"})]})]})}),e.jsx(C,{open:k,onOpenChange:d,children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(D,{children:"Reject Job Request"}),e.jsxs(T,{children:['Provide a reason for rejecting "',n?.title,'"']})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"rejection_reason",children:"Rejection Reason *"}),e.jsx(V,{id:"rejection_reason",rows:4,value:h.rejection_reason,onChange:s=>B("rejection_reason",s.target.value),placeholder:"Explain why this request is being rejected...",required:!0})]})}),e.jsxs(A,{children:[e.jsx(i,{variant:"outline",onClick:()=>{d(!1),b()},children:"Cancel"}),e.jsx(i,{variant:"destructive",onClick:P,disabled:f||!h.rejection_reason,children:"Reject"})]})]})})]})}export{Be as default};
