import{r as k,a as V,j as e,H as P,b as F}from"./app-DMb7LtCN.js";import{u as L,A as T}from"./AuthenticatedLayout-BpR-O0bi.js";import{C as u,b as j,c as f,d as q,a as v}from"./card-CiCOSHkd.js";import{B as t}from"./button-CyYx68q9.js";import{B as N}from"./badge-CvbwvDtg.js";import{D as B,a as M,b as E,c as Y,d as H,e as I}from"./dialog-bdycSNJr.js";import{T as J}from"./textarea-n-y0bKye.js";import{L as d}from"./label-BZ-wwOrJ.js";import{I as g}from"./input-DWiWIN5V.js";import{A as R,a as z}from"./alert-D7o7FP_e.js";import{C as G}from"./heroicons-currency-bangladeshi-EkhB25lb.js";import{A as O}from"./arrow-left-Dq_C6yjE.js";import{C as y}from"./circle-check-CE-XGutI.js";import{C as U}from"./calendar-ClkgfO5w.js";import{C as W}from"./clock-DShlToop.js";import{M as _}from"./map-pin-CJqOoX6D.js";import{U as $}from"./user-zfkujLDV.js";import{P as K}from"./phone-BaQYOIWr.js";import{S as Q}from"./send-jodvqaKc.js";import{F as X}from"./file-text-BgSZTrwQ.js";import{E as Z}from"./external-link-DEPtRERs.js";import"./sheet-YKnNUuIm.js";import"./index-DfnyotgD.js";import"./index-DyB_FsxT.js";import"./check-DLydRBiz.js";import"./circle-GvRAjOt2.js";import"./index-sWPyaVSD.js";import"./house-DzFDNX5R.js";import"./search-C3aeqjEW.js";import"./users-a5XCNlQQ.js";import"./book-open-C0o3UvSC.js";import"./mail-mQngeILv.js";function Fe({auth:C,job:s}){const[b,i]=k.useState(!1),o=C.tutor,m=o?.cv_path,l=o?.verification_status,{toast:x}=L(),{data:c,setData:n,post:w,processing:p,reset:h,errors:r}=V({cover_letter:"",cv_path:null}),D=()=>{if(l!=="verified"){x({variant:"destructive",title:"Verification Required",description:"You must be verified before applying to jobs. Please complete the verification process."});return}i(!0)},A=a=>{a.preventDefault(),w(route("tutor.jobs.apply",s.id),{onSuccess:()=>{i(!1),h(),x({title:"Application Submitted",description:"Your application has been successfully submitted."})},forceFormData:!0})};return e.jsxs(T,{children:[e.jsx(P,{title:s.title}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(t,{variant:"ghost",className:"mb-4",onClick:()=>F.visit(route("tutor.jobs")),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Back to Jobs"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(u,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(f,{className:"text-2xl mb-2",children:s.title}),e.jsxs(q,{children:["Posted on ",new Date(s.created_at).toLocaleDateString()]})]}),s.has_applied&&e.jsxs(N,{className:"bg-green-100 text-green-800",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Applied"]})]})}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:20,className:" text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Salary"}),e.jsxs("p",{className:"font-semibold text-green-600",children:[s.salary,"/month"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Days per Week"}),e.jsxs("p",{className:"font-semibold",children:[s.days_per_week," days"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Session Duration"}),e.jsxs("p",{className:"font-semibold",children:[s.duration_per_session," mins"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Location"}),e.jsx("p",{className:"font-semibold",children:s.location?.city})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:s.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Required Subjects"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(s.subject_names)&&s.subject_names.map((a,S)=>e.jsx(N,{variant:"secondary",children:a},S))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Additional Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Class Level"}),e.jsx("p",{className:"font-medium",children:s.class_level})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Education Medium"}),e.jsx("p",{className:"font-medium",children:s.education_medium})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Tuition Type"}),e.jsx("p",{className:"font-medium",children:s.tuition_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Gender Preference"}),e.jsx("p",{className:"font-medium capitalize",children:s.preferred_tutor_gender||"Any"})]})]})]}),s.additional_requirements&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Additional Requirements"}),e.jsx("p",{className:"text-slate-700",children:s.additional_requirements})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(u,{className:"sticky top-6",children:[e.jsx(j,{children:e.jsx(f,{children:"Guardian Information"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx($,{className:"h-6 w-6 text-slate-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[s.guardian?.first_name," ",s.guardian?.last_name]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Guardian"})]})]}),s.guardian?.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(K,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:s.guardian.phone})]}),s.guardian?.address&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(_,{className:"h-4 w-4 text-slate-500 mt-0.5"}),e.jsx("span",{children:s.guardian.address})]}),s.has_applied?e.jsxs(R,{className:"mt-4 bg-green-50 border-green-200",children:[e.jsx(y,{className:"h-4 w-4 text-green-600"}),e.jsx(z,{className:"text-green-800",children:"You have already applied for this job"})]}):e.jsxs(t,{className:"w-full mt-4",onClick:D,disabled:l!=="verified",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Apply for this Job"]}),l!=="verified"&&e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"* Verification required to apply"})]})]})})]})]})}),e.jsx(B,{open:b,onOpenChange:i,children:e.jsxs(M,{className:"max-w-2xl",children:[e.jsxs(E,{children:[e.jsx(Y,{children:"Apply for Job"}),e.jsx(H,{children:s.title})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"cover_letter",children:"Cover Letter *"}),e.jsx(J,{id:"cover_letter",placeholder:"Write a brief introduction about yourself and why you're a good fit for this position...",rows:6,value:c.cover_letter,onChange:a=>n("cover_letter",a.target.value),required:!0}),r.cover_letter&&e.jsx("p",{className:"text-sm text-red-500",children:r.cover_letter})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Curriculum Vitae (CV)"}),m?e.jsxs("div",{className:"border rounded-lg p-4 bg-slate-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-slate-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Your CV from Profile"}),e.jsx("p",{className:"text-xs text-slate-500",children:"This CV will be attached to your application"})]})]}),e.jsxs(t,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${m}`,"_blank"),children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"View CV"]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx(d,{htmlFor:"cv_upload",className:"text-sm text-slate-600",children:"Or upload a different CV (PDF only, max 5MB)"}),e.jsx(g,{id:"cv_upload",type:"file",accept:".pdf",className:"mt-2",onChange:a=>n("cv_path",a.target.files[0])}),c.cv_path&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["New CV selected: ",c.cv_path.name]})]})]}):e.jsxs("div",{children:[e.jsx(g,{id:"cv_upload",type:"file",accept:".pdf",onChange:a=>n("cv_path",a.target.files[0]),required:!0}),e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"You haven't uploaded a CV in your profile. Please upload one here (PDF only, max 5MB)"})]}),r.cv_path&&e.jsx("p",{className:"text-sm text-red-500",children:r.cv_path})]}),e.jsxs(I,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>{i(!1),h()},children:"Cancel"}),e.jsx(t,{type:"submit",disabled:p,children:p?"Submitting...":"Submit Application"})]})]})]})})]})}export{Fe as default};
