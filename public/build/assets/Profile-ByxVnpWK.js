import{r as u,a as U,j as e,H as R}from"./app-DsllCRkg.js";import{u as H,A as Y}from"./AuthenticatedLayout-C7FLhRCs.js";import{C as o,a as h}from"./card-5u8WTilj.js";import{B as p}from"./button-CoTJxXaf.js";import{I as r}from"./input-D-PX5_cd.js";import{L as t}from"./label-C3nxLCEe.js";import{T as N}from"./textarea-BuKTeqfs.js";import{A as g,a as b}from"./alert-B80j77oK.js";import{B as A}from"./badge-B200-mJa.js";import{S as f,a as _,b as y,c as w,d as n}from"./select-D9Q40lSf.js";import{L as z}from"./LocationDropdown-CHVcGcbb.js";import{S as O}from"./SubjectSelector-CVAZ5tbC.js";import{U as C}from"./user-0eZu2NEE.js";import{D as q}from"./download-BBIzKP6Z.js";import{E as J}from"./eye-CRNGiFUP.js";import{C as K}from"./circle-check-CKh-_473.js";import{G}from"./graduation-cap-BRxnaSAU.js";import{B as V,F as S}from"./file-text-CnOATaiY.js";import{S as Q}from"./save-DUAHQ-mS.js";import"./sheet-3K8_wCSN.js";import"./index-audHxnvk.js";import"./index-Cd5ZZqyH.js";import"./check-DGBoWBRM.js";import"./circle-OtpwoAGW.js";import"./index-CCrlpGWa.js";import"./house-vDFQtZPY.js";import"./search-AC4RCcwv.js";import"./users-CCfAm_xt.js";import"./book-open-C4UPpF1Q.js";import"./mail-BNel7RtU.js";import"./index-BL_GujtH.js";import"./chevron-down-K98srx8n.js";function Ee({auth:W,tutor:s,subjects:T,locations:X,flash:F}){const{toast:P}=H(),[m,D]=u.useState(!1),[x,L]=u.useState("tuition"),{data:i,setData:l,post:M,processing:v,errors:E}=U({name:s.user?.name||"",phone:s.phone||"",gender:s.gender||"",address:s.address||"",institution:s.institution||"",education_level:s.education_level||"",subjects:s.subjects||[],experience_years:s.experience_years||"",experience_details:s.experience_details||"",hourly_rate:s.hourly_rate||"",bio:s.bio||"",location_id:s.location_id||"",available_days:s.available_days||"",available_time_from:s.available_time_from||"",available_time_to:s.available_time_to||"",preferred_locations:s.preferred_locations||"",tutoring_styles:s.tutoring_styles||"",tutoring_method:s.tutoring_method||"",place_of_tutoring:s.place_of_tutoring||"",division:s.division||"",district:s.district||"",photo:null,cv_path:null}),[I,$]=u.useState(s.photo?`/storage/${s.photo}`:null);u.useEffect(()=>{m&&(console.log("Syncing form data with tutor.subjects:",s.subjects),l("subjects",s.subjects||[]))},[m,s.subjects]);const k=a=>{const c=a.target.files[0];if(c){l("photo",c);const d=new FileReader;d.onloadend=()=>$(d.result),d.readAsDataURL(c)}},B=a=>{a.preventDefault();const c={...i,subjects:i.subjects||[]};M(route("tutor.profile.update"),{data:c,onSuccess:()=>{P({title:"Success",description:"Profile updated successfully"})},onError:d=>{console.error("Validation errors:",d),P({title:"Error",description:Object.values(d).join(", "),variant:"destructive"})},forceFormData:!0})},j=s.profile_completion_percentage||0;return e.jsxs(Y,{children:[e.jsx(R,{title:"My Profile"}),e.jsxs("div",{className:"p-4 md:p-8",children:[j<70&&e.jsx(g,{className:"mb-6 border-orange-200 bg-orange-50",children:e.jsxs(b,{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("svg",{className:"h-5 w-5 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-orange-900",children:"Complete Your Profile to Unlock All Features"}),e.jsxs("p",{className:"text-sm text-orange-800 mt-1",children:["Your profile is currently ",j,"% complete. You need at least 70% completion to access dashboard, browse jobs, and apply for positions. Please fill in the required information below."]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-1 lg:col-span-4 order-1",children:e.jsxs(o,{className:"rounded-xl border shadow-sm",children:[e.jsxs(h,{className:"p-6 text-center",children:[I?e.jsx("img",{src:I,alt:"Profile",className:"mx-auto h-24 w-24 rounded-full object-cover bg-slate-200"}):e.jsx("div",{className:"mx-auto h-24 w-24 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(C,{className:"h-12 w-12 text-slate-400"})}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:s.user?.name||`${s.first_name||""} ${s.last_name||""}`.trim()||"No Name"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Tutor ID: TUT-",String(s.id).padStart(5,"0")]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Rating: 0 / 5.0"}),e.jsxs("div",{className:`mt-3 inline-block rounded-full px-3 py-1 text-xs ${j===100?"bg-green-100 text-green-600":"bg-rose-100 text-rose-600"}`,children:["Profile Completed: ",j,"%"]})]}),e.jsxs("div",{className:"px-6 pb-6 space-y-3",children:[e.jsx(p,{onClick:()=>D(!m),className:"w-full rounded-md bg-slate-900 hover:bg-slate-800 text-white",children:m?"View Profile":"Edit Profile"}),e.jsxs("div",{className:"text-sm space-y-3 border-t pt-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Email"}),e.jsx("p",{className:"font-medium break-words",children:s.user?.email||"Not Given"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Phone Number"}),e.jsx("p",{className:"font-medium",children:s.phone||e.jsx("span",{className:"text-rose-500",children:"Not Given"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Address"}),e.jsx("p",{className:"font-medium",children:s.address||e.jsx("span",{className:"text-rose-500",children:"Not Given"})})]})]}),e.jsxs("div",{className:"border-t pt-4 text-sm",children:[e.jsx("p",{className:"font-medium",children:"Verification Status"}),e.jsx(A,{variant:s.verification_status==="verified"?"default":"secondary",className:"mt-1",children:s.verification_status||"Not Verified"})]}),e.jsxs("div",{className:"space-y-2",children:[s.cv_path&&e.jsx(p,{variant:"default",className:"w-full rounded-md bg-slate-900 text-white",asChild:!0,children:e.jsxs("a",{href:`/storage/${s.cv_path}`,download:!0,children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Download CV"]})}),e.jsx(p,{variant:"outline",className:"w-full rounded-md border-slate-300",asChild:!0,children:e.jsxs("a",{href:route("tutors.show",s.id),target:"_blank",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"View as Guardian/Student"]})})]})]})]})}),e.jsxs("div",{className:"col-span-1 lg:col-span-8 order-2",children:[F?.success&&e.jsxs(g,{className:"mb-6 bg-green-50 border-green-200",children:[e.jsx(K,{className:"h-4 w-4 text-green-600"}),e.jsx(b,{className:"text-green-800",children:F.success})]}),m?e.jsxs("form",{onSubmit:B,children:[e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2 lg:grid lg:grid-cols-4 lg:gap-3",children:[{id:"personal",label:"Personal",icon:C},{id:"education",label:"Educational",icon:G},{id:"tuition",label:"Tuition Related",icon:V},{id:"credential",label:"Credential",icon:S}].map(a=>e.jsxs("button",{type:"button",onClick:()=>L(a.id),className:`flex-shrink-0 rounded-lg border-2 px-3 py-2 text-center transition-all lg:rounded-xl lg:p-4 lg:block ${x===a.id?"border-slate-900 bg-slate-900 text-white shadow-lg":"border-slate-200 bg-white text-slate-600 hover:border-slate-300 hover:shadow"}`,children:[e.jsx(a.icon,{className:"h-4 w-4 mx-auto mb-0 lg:h-5 lg:w-5 lg:mb-2"}),e.jsx("p",{className:"text-xs font-medium whitespace-nowrap",children:a.label})]},a.id))}),e.jsx(o,{className:"rounded-xl border shadow-sm",children:e.jsxs("div",{className:"p-4 md:p-6",children:[x==="tuition"&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 pb-3 border-b flex items-center",children:[e.jsx(V,{className:"h-5 w-5 mr-2 text-slate-700"}),"Tuition Related Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"available_days",className:"text-sm",children:"Available Days"}),e.jsx(r,{id:"available_days",className:"rounded-md",placeholder:"Available Days",value:i.available_days,onChange:a=>l("available_days",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"hourly_rate",className:"text-sm",children:"Expected Salary (Monthly)"}),e.jsx(r,{id:"hourly_rate",type:"number",className:"rounded-md",placeholder:"Expected Monthly Salary in BDT",value:i.hourly_rate,onChange:a=>l("hourly_rate",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"available_time_from",className:"text-sm",children:"Time From"}),e.jsx(r,{id:"available_time_from",type:"time",className:"rounded-md",value:i.available_time_from,onChange:a=>l("available_time_from",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"available_time_to",className:"text-sm",children:"Time To"}),e.jsx(r,{id:"available_time_to",type:"time",className:"rounded-md",value:i.available_time_to,onChange:a=>l("available_time_to",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"preferred_locations",className:"text-sm",children:"Preferred Locations"}),e.jsx(r,{id:"preferred_locations",className:"rounded-md",placeholder:"Preferred Locations",value:i.preferred_locations,onChange:a=>l("preferred_locations",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"tutoring_styles",className:"text-sm",children:"Tutoring Styles"}),e.jsx(r,{id:"tutoring_styles",className:"rounded-md",placeholder:"Tutoring Styles",value:i.tutoring_styles,onChange:a=>l("tutoring_styles",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"tutoring_method",className:"text-sm",children:"Tutoring Method"}),e.jsxs(f,{value:i.tutoring_method,onValueChange:a=>l("tutoring_method",a),children:[e.jsx(_,{className:"rounded-md",children:e.jsx(y,{placeholder:"Select method"})}),e.jsxs(w,{children:[e.jsx(n,{value:"online",children:"Online"}),e.jsx(n,{value:"in-person",children:"In-Person"}),e.jsx(n,{value:"hybrid",children:"Hybrid"})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm",children:"Place of Tutoring (District)"}),e.jsx(z,{divisionValue:i.division,districtValue:i.district,onDivisionChange:a=>l("division",a),onDistrictChange:a=>l("district",a),divisionLabel:"Division",districtLabel:"District",showLabels:!0})]})]})]}),x==="education"&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 pb-3 border-b flex items-center",children:[e.jsx(G,{className:"h-5 w-5 mr-2 text-slate-700"}),"Educational Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"institution",className:"text-sm",children:"Institution/University"}),e.jsx(r,{id:"institution",className:"rounded-md",placeholder:"e.g., LUMS, NUST, IBA",value:i.institution,onChange:a=>l("institution",a.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"education_level",className:"text-sm",children:"Education Level"}),e.jsxs(f,{value:i.education_level,onValueChange:a=>l("education_level",a),children:[e.jsx(_,{className:"rounded-md",children:e.jsx(y,{placeholder:"Select level"})}),e.jsxs(w,{children:[e.jsx(n,{value:"high_school",children:"High School"}),e.jsx(n,{value:"intermediate",children:"Intermediate"}),e.jsx(n,{value:"bachelors",children:"Bachelor's"}),e.jsx(n,{value:"masters",children:"Master's"}),e.jsx(n,{value:"phd",children:"PhD"})]})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx(O,{subjects:T,selectedSubjects:i.subjects,onSubjectsChange:a=>l("subjects",a),label:"Subjects I Teach",placeholder:"Search subjects..."})})]})]}),x==="personal"&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 pb-3 border-b flex items-center",children:[e.jsx(C,{className:"h-5 w-5 mr-2 text-slate-700"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"photo",className:"text-sm",children:"Profile Photo"}),e.jsx(r,{id:"photo",type:"file",accept:"image/*",className:"rounded-md",onChange:k})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"name",className:"text-sm",children:"Full Name"}),e.jsx(r,{id:"name",className:"rounded-md",placeholder:s.user?.name||"Enter your full name",value:i.name,onChange:a=>l("name",a.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"phone",className:"text-sm",children:"Phone Number"}),e.jsx(r,{id:"phone",className:"rounded-md",placeholder:"03001234567",value:i.phone,onChange:a=>l("phone",a.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs(t,{htmlFor:"gender",className:"text-sm",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(f,{value:i.gender,onValueChange:a=>l("gender",a),children:[e.jsx(_,{className:"rounded-md",children:e.jsx(y,{placeholder:"Select gender"})}),e.jsxs(w,{children:[e.jsx(n,{value:"male",children:"Male"}),e.jsx(n,{value:"female",children:"Female"}),e.jsx(n,{value:"other",children:"Other"})]})]}),E.gender&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:E.gender})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"address",className:"text-sm",children:"Address"}),e.jsx(N,{id:"address",rows:3,className:"rounded-md",placeholder:"Your complete address",value:i.address,onChange:a=>l("address",a.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"bio",className:"text-sm",children:"About Me"}),e.jsx(N,{id:"bio",rows:4,className:"rounded-md",placeholder:"Tell guardians about yourself...",value:i.bio,onChange:a=>l("bio",a.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"experience_years",className:"text-sm",children:"Years of Experience"}),e.jsx(r,{id:"experience_years",type:"number",className:"rounded-md",placeholder:"3",value:i.experience_years,onChange:a=>l("experience_years",a.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(t,{htmlFor:"experience_details",className:"text-sm",children:"Experience Details"}),e.jsx(N,{id:"experience_details",rows:4,className:"rounded-md",placeholder:"Describe your teaching experience...",value:i.experience_details,onChange:a=>l("experience_details",a.target.value)})]})]}),"                                        "]}),x==="credential"&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 pb-3 border-b flex items-center",children:[e.jsx(S,{className:"h-5 w-5 mr-2 text-slate-700"}),"Credential Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs(t,{htmlFor:"cv_path",className:"text-sm",children:[e.jsx(S,{className:"inline h-4 w-4"})," Upload CV"]}),s.cv_path&&e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:e.jsx("a",{href:`/storage/${s.cv_path}`,target:"_blank",className:"text-blue-600 underline",children:"View Current CV"})}),e.jsx(r,{id:"cv_path",type:"file",accept:".pdf",className:"rounded-md",onChange:a=>l("cv_path",a.target.files[0])}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"PDF only - Max 5MB"})]}),e.jsx(g,{className:"bg-slate-50 col-span-1 md:col-span-2",children:e.jsx(b,{className:"text-sm text-slate-600",children:"A well-formatted CV increases your chances of getting hired. Include your education, certifications, and teaching experience."})})]})]})]})}),e.jsx(o,{className:"rounded-xl border shadow-sm mt-6",children:e.jsx(h,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>D(!1),disabled:v,className:"rounded-md flex-1 sm:flex-none",children:"Cancel"}),e.jsxs(p,{type:"submit",disabled:v,className:"rounded-md bg-slate-900 hover:bg-slate-800 flex-1 sm:flex-none",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),v?"Saving...":"Save Profile"]})]})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{className:"rounded-xl border shadow-sm",children:e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"mb-4 font-semibold",children:"Availability Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-3 text-sm",children:[e.jsx("p",{className:"text-slate-500",children:"Available Days"}),e.jsx("p",{children:s.available_days||e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500",children:"Time"}),e.jsx("p",{children:s.available_time_from&&s.available_time_to?`${s.available_time_from} - ${s.available_time_to}`:e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500",children:"Place of Tutoring (District)"}),e.jsx("p",{children:s.division&&s.district?`${s.district}, ${s.division}`:e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500",children:"Preferred Locations"}),e.jsx("p",{children:s.preferred_locations||e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500",children:"Expected Salary (Monthly)"}),e.jsx("p",{children:s.hourly_rate?`à§³${s.hourly_rate}/month`:e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500",children:"Tutoring Styles"}),e.jsx("p",{children:s.tutoring_styles||e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500",children:"Tutoring Method"}),e.jsx("p",{children:s.tutoring_method||e.jsx("span",{className:"text-rose-500",children:"Not Given"})})]})]})}),e.jsx(o,{className:"rounded-xl border shadow-sm",children:e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"mb-4 font-semibold",children:"Educational Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-3 text-sm",children:[e.jsx("p",{className:"text-slate-500",children:"Institution"}),e.jsx("p",{children:s.institution||e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500",children:"Education Level"}),e.jsx("p",{children:s.education_level?s.education_level.replace("_"," ").charAt(0).toUpperCase()+s.education_level.replace("_"," ").slice(1):e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500 col-span-2 mt-2",children:"Subjects I Teach"}),e.jsx("p",{className:"col-span-2",children:s.subjects&&Array.isArray(s.subjects)&&s.subjects.length>0?e.jsx("span",{className:"flex flex-wrap gap-1",children:T.filter(a=>s.subjects.map(c=>parseInt(c)).includes(a.id)).map(a=>e.jsx(A,{variant:"secondary",className:"text-xs",children:a.name},a.id))}):e.jsx("span",{className:"text-rose-500",children:"Not Given"})})]})]})}),e.jsx(o,{className:"rounded-xl border shadow-sm",children:e.jsxs(h,{className:"p-6",children:[e.jsx("h3",{className:"mb-4 font-semibold",children:"Experience Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-3 text-sm",children:[e.jsx("p",{className:"text-slate-500",children:"Total Experience"}),e.jsx("p",{children:s.experience_years?`${s.experience_years} years`:e.jsx("span",{className:"text-rose-500",children:"Not Given"})}),e.jsx("p",{className:"text-slate-500",children:"Experience Details"}),e.jsx("p",{className:"col-span-2",children:s.experience_details||e.jsx("span",{className:"text-rose-500",children:"Not Given"})})]})]})})]})]})]})]})]})}export{Ee as default};
