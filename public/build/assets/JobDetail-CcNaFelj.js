import{r as V,b as F,j as e,H as P,a as L}from"./app-BM39ZNPj.js";import{u as T,A as q}from"./AuthenticatedLayout-BuyVMY46.js";import{C as u,a as j,b as f,d as B,c as N}from"./card-CZV2a5qS.js";import{B as t}from"./button-L9Ibkh2e.js";import{B as v}from"./badge-BOorG3Y2.js";import{D as M,a as E,b as I,c as Y,d as H,e as J}from"./dialog-DN4CNu-R.js";import{T as R}from"./textarea-Bssh_41k.js";import{L as d}from"./label-DHdrAhPO.js";import{I as g}from"./input-Bisg48ya.js";import{A as z,a as G}from"./alert-Be5Qo1DO.js";import{C as $}from"./heroicons-currency-bangladeshi-Bh5BYNbq.js";import{A as O}from"./arrow-left-u4_UzMY-.js";import{C as y}from"./circle-check-DqTg1QR_.js";import{C as U}from"./calendar-CUVTJ3vu.js";import{C as W}from"./clock-DvFArMct.js";import{M as _}from"./map-pin-QHVYB8Zg.js";import{U as C}from"./user-B8-6hGb0.js";import{P as K}from"./phone-nlisMtX5.js";import{S as Q}from"./send-D8_5YM-I.js";import{F as X}from"./file-text-lJzWKPdZ.js";import{E as Z}from"./external-link-CCGLEsH_.js";import"./sheet-BYX3EfCP.js";import"./index-9K_qhvjF.js";import"./index-C0p4j4ih.js";import"./check-CT69isk3.js";import"./circle-DcQcNfkJ.js";import"./index-CUeSS-K4.js";import"./house-CMaEuJe6.js";import"./search-CoJaJ27H.js";import"./users-DwKGvgzc.js";import"./book-open-D_bcU3AP.js";import"./mail-C7HWZAv2.js";function Pe({auth:w,job:s}){const[b,i]=V.useState(!1),m=w.tutor,o=m?.cv_path,l=m?.verification_status,{toast:x}=T(),{data:c,setData:n,post:A,processing:p,reset:h,errors:r}=F({cover_letter:"",cv_path:null}),D=()=>{if(l!=="verified"){x({variant:"destructive",title:"Verification Required",description:"You must be verified before applying to jobs. Please complete the verification process."});return}i(!0)},S=a=>{a.preventDefault(),A(route("tutor.jobs.apply",s.id),{onSuccess:()=>{i(!1),h(),x({title:"Application Submitted",description:"Your application has been successfully submitted."})},forceFormData:!0})};return e.jsxs(q,{children:[e.jsx(P,{title:s.title}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs(t,{variant:"ghost",className:"mb-4",onClick:()=>L.visit(route("tutor.jobs")),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Back to Jobs"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(u,{children:[e.jsx(j,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(f,{className:"text-2xl mb-2",children:s.title}),e.jsxs(B,{children:["Posted on ",new Date(s.created_at).toLocaleDateString()]})]}),s.has_applied&&e.jsxs(v,{className:"bg-green-100 text-green-800",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),"Applied"]})]})}),e.jsxs(N,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{size:20,className:" text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Salary"}),e.jsxs("p",{className:"font-semibold text-green-600",children:["à§³",parseInt(s.salary),"/month"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Days per Week"}),e.jsxs("p",{className:"font-semibold",children:[s.days_per_week," days"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Session Duration"}),e.jsxs("p",{className:"font-semibold",children:[s.duration_per_session," mins"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Location"}),e.jsx("p",{className:"font-semibold",children:s.preferred_location&&s.district?`${s.preferred_location}, ${s.district}`:s.district||s.preferred_location||"N/A"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:s.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Required Subjects"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(s.subject_names)&&s.subject_names.map((a,k)=>e.jsx(v,{variant:"secondary",children:a},k))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Additional Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Class Level"}),e.jsx("p",{className:"font-medium",children:s.class_level})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Education Medium"}),e.jsx("p",{className:"font-medium",children:s.education_medium})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Tuition Type"}),e.jsx("p",{className:"font-medium",children:s.tuition_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500",children:"Gender Preference"}),e.jsx("p",{className:"font-medium capitalize",children:s.preferred_tutor_gender||"Any"})]})]})]}),s.additional_requirements&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Additional Requirements"}),e.jsx("p",{className:"text-slate-700",children:s.additional_requirements})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(u,{className:"sticky top-6",children:[e.jsx(j,{children:e.jsx(f,{children:"Guardian Information"})}),e.jsxs(N,{className:"space-y-4",children:[s.guardian===null?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(C,{className:"h-6 w-6 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Admin"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Admin"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center",children:e.jsx(C,{className:"h-6 w-6 text-slate-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[s.guardian?.first_name," ",s.guardian?.last_name]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Guardian"})]})]}),s.guardian?.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(K,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{children:s.guardian.phone})]}),s.guardian?.address&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(_,{className:"h-4 w-4 text-slate-500 mt-0.5"}),e.jsx("span",{children:s.guardian.address})]})]}),s.has_applied?e.jsxs(z,{className:"mt-4 bg-green-50 border-green-200",children:[e.jsx(y,{className:"h-4 w-4 text-green-600"}),e.jsx(G,{className:"text-green-800",children:"You have already applied for this job"})]}):e.jsxs(t,{className:"w-full mt-4",onClick:D,disabled:l!=="verified",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Apply for this Job"]}),l!=="verified"&&e.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"* Verification required to apply"})]})]})})]})]})}),e.jsx(M,{open:b,onOpenChange:i,children:e.jsxs(E,{className:"max-w-2xl",children:[e.jsxs(I,{children:[e.jsx(Y,{children:"Apply for Job"}),e.jsx(H,{children:s.title})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"cover_letter",children:"Cover Letter *"}),e.jsx(R,{id:"cover_letter",placeholder:"Write a brief introduction about yourself and why you're a good fit for this position...",rows:6,value:c.cover_letter,onChange:a=>n("cover_letter",a.target.value),required:!0}),r.cover_letter&&e.jsx("p",{className:"text-sm text-red-500",children:r.cover_letter})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{children:"Curriculum Vitae (CV)"}),o?e.jsxs("div",{className:"border rounded-lg p-4 bg-slate-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-slate-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Your CV from Profile"}),e.jsx("p",{className:"text-xs text-slate-500",children:"This CV will be attached to your application"})]})]}),e.jsxs(t,{type:"button",variant:"outline",size:"sm",onClick:()=>window.open(`/storage/${o}`,"_blank"),children:[e.jsx(Z,{className:"h-4 w-4 mr-1"}),"View CV"]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx(d,{htmlFor:"cv_upload",className:"text-sm text-slate-600",children:"Or upload a different CV (PDF only, max 5MB)"}),e.jsx(g,{id:"cv_upload",type:"file",accept:".pdf",className:"mt-2",onChange:a=>n("cv_path",a.target.files[0])}),c.cv_path&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["New CV selected: ",c.cv_path.name]})]})]}):e.jsxs("div",{children:[e.jsx(g,{id:"cv_upload",type:"file",accept:".pdf",onChange:a=>n("cv_path",a.target.files[0]),required:!0}),e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"You haven't uploaded a CV in your profile. Please upload one here (PDF only, max 5MB)"})]}),r.cv_path&&e.jsx("p",{className:"text-sm text-red-500",children:r.cv_path})]}),e.jsxs(J,{children:[e.jsx(t,{type:"button",variant:"outline",onClick:()=>{i(!1),h()},children:"Cancel"}),e.jsx(t,{type:"submit",disabled:p,children:p?"Submitting...":"Submit Application"})]})]})]})})]})}export{Pe as default};
