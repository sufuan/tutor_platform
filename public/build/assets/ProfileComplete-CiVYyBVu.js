import{r as b,b as F,j as e}from"./app-DvBjVBiq.js";import{A as X}from"./AuthenticatedLayout-BpLTeax-.js";import{B as n}from"./button-D78GArki.js";import{C as v,c as C,a as D,b as A,d as T}from"./card-Cv20zNkG.js";import{I as _}from"./input-owfrPoiq.js";import{L as d}from"./label-DQWd8xsQ.js";import{T as q}from"./textarea-CN0bUZRN.js";import"./select-UkU2VIiX.js";import{C as B}from"./checkbox-Gv-DZtsr.js";import{P as H}from"./progress-u0vBrYwq.js";import{L as I,S as R}from"./SubjectSelector-DmCoh1pt.js";import{C as V}from"./circle-check-big-D9bL0hd6.js";import"./sheet-DChk3iRr.js";import"./index-q50AiS3X.js";import"./index-Dprr2haP.js";import"./check-Dnjo-tIP.js";import"./circle--NTZZ6CK.js";import"./badge-t35BXhJV.js";import"./index-B2P68d7Q.js";import"./house-CbNyQ-r7.js";import"./user-twfyhSbf.js";import"./file-text-7h3AE9q6.js";import"./search-B8nUHUAo.js";import"./users-AJ8Cg7pc.js";import"./book-open-CISuMiZF.js";import"./mail-DnWs02vJ.js";import"./index-BWOq2R2J.js";import"./chevron-down-nebro6Ao.js";function be({auth:c,guardian:a={},locations:$=[],subjects:N=[],categories:G=[]}){const[t,m]=b.useState(1),[g,p]=b.useState(!1),u=4,{data:r,setData:i,post:y,processing:x,errors:l}=F({name:c?.name||"",phone:a?.phone||"",division:a?.division||"",district:a?.district||"",detailed_address:a?.detailed_address||"",preferred_subjects:a?.preferred_subjects||[],preferred_class_levels:a?.preferred_class_levels||[]}),S=["Play","Nursery","KG","Class 1","Class 2","Class 3","Class 4","Class 5","Class 6","Class 7","Class 8","Class 9","Class 10","SSC","HSC","A Level","O Level"],h=()=>{let s=0;return r.name&&s++,r.phone&&s++,r.division&&s++,r.district&&s++,r.detailed_address&&s++,r.preferred_subjects.length>0&&s++,r.preferred_class_levels.length>0&&s++,Math.round(s/7*100)},f=s=>{switch(s){case 1:return r.name&&r.phone;case 2:return r.division&&r.district;case 3:return r.detailed_address;case 4:return r.preferred_subjects.length>0&&r.preferred_class_levels.length>0;default:return!1}},P=s=>{if(s.preventDefault(),!g){console.log("Form submission blocked - Complete Profile button not clicked");return}console.log("Form submitted with data:",r),y(route("guardian.profile.complete.store"),{preserveScroll:!0,onSuccess:()=>{console.log("Profile completed successfully")},onError:o=>{console.log("Form errors:",o),p(!1)}})},w=s=>{p(!0)},L=()=>{t<u&&m(t+1)},k=()=>{t>1&&m(t-1)},j=[{number:1,title:"Personal Info"},{number:2,title:"Location"},{number:3,title:"Address"},{number:4,title:"Preferences"}];return e.jsx(X,{header:e.jsx("h2",{className:"font-heading text-xl font-semibold text-gray-800",children:"Complete Your Profile"}),children:e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(v,{className:"mb-8",children:e.jsxs(C,{className:"pt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm font-medium text-primary-blue",children:[h(),"%"]})]}),e.jsx(H,{value:h(),className:"h-3"})]}),e.jsx("div",{className:"flex justify-between mt-6",children:j.map(s=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${t>=s.number?"border-primary-blue bg-primary-blue text-white":"border-gray-300 text-gray-400"}`,children:t>s.number?e.jsx(V,{className:"h-6 w-6"}):e.jsx("span",{children:s.number})}),e.jsx("span",{className:"text-xs mt-2 text-center",children:s.title})]},s.number))})]})}),e.jsxs(v,{children:[e.jsxs(D,{children:[e.jsxs(A,{children:["Step ",t,": ",j[t-1].title]}),e.jsxs(T,{children:[t===1&&"Enter your personal information",t===2&&"Select your location",t===3&&"Provide your detailed address",t===4&&"Set your preferences for tutors"]})]}),e.jsx(C,{children:e.jsxs("form",{onSubmit:P,className:"space-y-6",onKeyDown:s=>{s.key==="Enter"&&s.target.tagName!=="TEXTAREA"&&s.preventDefault()},children:[t===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",children:"Full Name *"}),e.jsx(_,{id:"name",placeholder:c?.name||"Enter your full name",value:r.name,onChange:s=>i("name",s.target.value),className:"mt-1",required:!0}),l.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(_,{id:"phone",type:"tel",placeholder:"01XXXXXXXXX",value:r.phone,onChange:s=>i("phone",s.target.value),className:"mt-1",required:!0}),l.phone&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.phone})]})]}),t===2&&e.jsxs("div",{children:[e.jsx(d,{children:"Location *"}),e.jsx(I,{divisionValue:r.division,districtValue:r.district,onDivisionChange:s=>i("division",s),onDistrictChange:s=>i("district",s),divisionError:l.division,districtError:l.district})]}),t===3&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"detailed_address",children:"Detailed Address *"}),e.jsx(q,{id:"detailed_address",placeholder:"House no, Road no, Area...",value:r.detailed_address,onChange:s=>i("detailed_address",s.target.value),rows:4,className:"mt-1",required:!0}),l.detailed_address&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.detailed_address})]}),t===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(R,{subjects:N,selectedSubjects:r.preferred_subjects,onSubjectsChange:s=>i("preferred_subjects",s),label:"Preferred Subjects *",placeholder:"Search and select subjects you prefer tutors for..."}),l.preferred_subjects&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.preferred_subjects})]}),e.jsxs("div",{children:[e.jsx(d,{children:"Preferred Class Levels *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-2",children:S.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:`level-${s}`,checked:r.preferred_class_levels.includes(s),onCheckedChange:o=>{o?i("preferred_class_levels",[...r.preferred_class_levels,s]):i("preferred_class_levels",r.preferred_class_levels.filter(E=>E!==s))}}),e.jsx(d,{htmlFor:`level-${s}`,className:"text-sm font-normal cursor-pointer",children:s})]},s))}),l.preferred_class_levels&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.preferred_class_levels})]})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx("div",{children:t>1&&e.jsx(n,{type:"button",variant:"outline",onClick:k,children:"Previous"})}),e.jsx("div",{className:"flex gap-3",children:t<u?e.jsx(n,{type:"button",onClick:L,disabled:!f(t),children:"Next"}):e.jsx(n,{type:"submit",disabled:x||!f(t),className:"bg-success hover:bg-success/90",onClick:w,children:x?"Saving...":"Complete Profile"})})]})]})})]})]})})})}export{be as default};
