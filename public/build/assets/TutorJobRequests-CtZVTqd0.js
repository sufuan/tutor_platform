import{r as v,a as F,j as e,H as M,b as C}from"./app-D56fJV5T.js";import{A as O}from"./AuthenticatedLayout-CrVtqVnZ.js";import{C as a,b as x,c as m,a as r,d as U}from"./card-CaHjWWI2.js";import{B as i}from"./button-Anm0rw7C.js";import{B as p}from"./badge-D8nhticf.js";import{D as w,a as R,b as _,c as D,d as A,e as T}from"./dialog-BSF0kPWM.js";import{T as I}from"./textarea-C2raOctS.js";import{L as V}from"./label-ElrJrBNL.js";import{T as X,a as G,b as N,c as u}from"./tabs-B5dSAo6J.js";import{C as K}from"./heroicons-currency-bangladeshi-BR9-tC9n.js";import{E as Q}from"./eye-M4unfM1O.js";import{U as W}from"./user-DX-xlDTS.js";import{M as Y}from"./map-pin-Bu3hg6DV.js";import{C as Z}from"./calendar-B2p6h1D9.js";import{B as $}from"./file-text-JxuxQrBK.js";import{C as q}from"./circle-check-big-DiDJhQZx.js";import{C as ee}from"./circle-x-UkKetXiK.js";import"./sheet-oq0FYnNn.js";import"./index-lrQDdO9O.js";import"./index-c4AsyinG.js";import"./check-Cx1Mx1zP.js";import"./circle-CvvHGmbE.js";import"./input-C8WkwJhz.js";import"./index-CJvPRITM.js";import"./house-BDAGjlcm.js";import"./search-BwhiQN7a.js";import"./users-DR05EF0h.js";import"./book-open-DYVn_e5B.js";import"./mail-DsaBw_vr.js";function ke({auth:se,jobRequests:j,stats:l}){const[n,c]=v.useState(null),[S,o]=v.useState(!1),[B,d]=v.useState(!1),{data:h,setData:k,post:ae,processing:f,reset:b}=F({rejection_reason:""}),E=s=>{c(s),o(!0)},J=()=>{C.post(route("admin.tutor-job-requests.approve",n.id),{},{onSuccess:()=>{o(!1),c(null)}})},L=s=>{c(s),d(!0)},P=()=>{C.post(route("admin.tutor-job-requests.reject",n.id),{rejection_reason:h.rejection_reason},{onSuccess:()=>{d(!1),c(null),b()}})},z=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",approved:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",t={pending:j.filter(s=>s.approval_status==="pending"),approved:j.filter(s=>s.approval_status==="approved"),rejected:j.filter(s=>s.approval_status==="rejected")},g=({request:s})=>e.jsxs(a,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(x,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(p,{variant:"outline",className:z(s.approval_status),children:s.approval_status}),e.jsxs(p,{variant:"secondary",children:[e.jsx(Q,{className:"h-3 w-3 mr-1"}),s.views," views"]})]}),e.jsx(m,{className:"text-xl",children:s.title}),e.jsxs(U,{children:["Posted on ",new Date(s.created_at).toLocaleDateString()]})]})})}),e.jsxs(r,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"font-medium",children:s.tutor?.user?.name||"N/A"})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.district,", ",s.division]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(K,{size:16,className:""}),e.jsxs("span",{className:"font-semibold text-green-600",children:[s.monthly_salary,"/month"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:s.available_days?.join(", ")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"capitalize",children:s.teaching_mode})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.subject_names?.map((y,H)=>e.jsx(p,{variant:"secondary",className:"text-xs",children:y},H))}),s.rejection_reason&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-800",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",s.rejection_reason]}),s.approval_status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(i,{size:"sm",variant:"outline",className:"flex-1 border-green-500 text-green-600 hover:bg-green-50",onClick:()=>E(s),children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Approve"]}),e.jsxs(i,{size:"sm",variant:"outline",className:"flex-1 border-red-500 text-red-600 hover:bg-red-50",onClick:()=>L(s),children:[e.jsx(ee,{className:"h-4 w-4 mr-1"}),"Reject"]})]})]})]});return e.jsxs(O,{children:[e.jsx(M,{title:"Tutor Job Requests"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tutor Job Requests"}),e.jsx("p",{className:"text-gray-600",children:"Review and approve tutor service listings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(a,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Pending"})}),e.jsx(r,{children:e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:l.pending})})]}),e.jsxs(a,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Approved"})}),e.jsx(r,{children:e.jsx("div",{className:"text-3xl font-bold text-green-600",children:l.approved})})]}),e.jsxs(a,{children:[e.jsx(x,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Rejected"})}),e.jsx(r,{children:e.jsx("div",{className:"text-3xl font-bold text-red-600",children:l.rejected})})]})]}),e.jsxs(X,{defaultValue:"pending",className:"space-y-4",children:[e.jsxs(G,{children:[e.jsxs(N,{value:"pending",className:"relative",children:["Pending",l.pending>0&&e.jsx(p,{className:"ml-2 bg-yellow-500",children:l.pending})]}),e.jsx(N,{value:"approved",children:"Approved"}),e.jsx(N,{value:"rejected",children:"Rejected"})]}),e.jsx(u,{value:"pending",className:"space-y-4",children:t.pending.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.pending.map(s=>e.jsx(g,{request:s},s.id))}):e.jsx(a,{children:e.jsx(r,{className:"text-center py-12 text-gray-500",children:"No pending requests"})})}),e.jsx(u,{value:"approved",className:"space-y-4",children:t.approved.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.approved.map(s=>e.jsx(g,{request:s},s.id))}):e.jsx(a,{children:e.jsx(r,{className:"text-center py-12 text-gray-500",children:"No approved requests"})})}),e.jsx(u,{value:"rejected",className:"space-y-4",children:t.rejected.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.rejected.map(s=>e.jsx(g,{request:s},s.id))}):e.jsx(a,{children:e.jsx(r,{className:"text-center py-12 text-gray-500",children:"No rejected requests"})})})]})]})}),e.jsx(w,{open:S,onOpenChange:o,children:e.jsxs(R,{children:[e.jsxs(_,{children:[e.jsx(D,{children:"Approve Job Request"}),e.jsxs(A,{children:['Are you sure you want to approve "',n?.title,'"?']})]}),e.jsxs(T,{children:[e.jsx(i,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(i,{onClick:J,disabled:f,children:"Approve"})]})]})}),e.jsx(w,{open:B,onOpenChange:d,children:e.jsxs(R,{children:[e.jsxs(_,{children:[e.jsx(D,{children:"Reject Job Request"}),e.jsxs(A,{children:['Provide a reason for rejecting "',n?.title,'"']})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"rejection_reason",children:"Rejection Reason *"}),e.jsx(I,{id:"rejection_reason",rows:4,value:h.rejection_reason,onChange:s=>k("rejection_reason",s.target.value),placeholder:"Explain why this request is being rejected...",required:!0})]})}),e.jsxs(T,{children:[e.jsx(i,{variant:"outline",onClick:()=>{d(!1),b()},children:"Cancel"}),e.jsx(i,{variant:"destructive",onClick:P,disabled:f||!h.rejection_reason,children:"Reject"})]})]})})]})}export{ke as default};
