import{r as A,j as e,H as T,a as S}from"./app-C7MvOryi.js";import{A as k,M as B}from"./AuthenticatedLayout-Cj5aFNuU.js";import{C as d,a as m,b as x,c as i}from"./card-nlni5N5M.js";import{B as o}from"./button-CQtJboRT.js";import{B as g}from"./badge-D1QMFHot.js";import{T as D,a as R,b as N,c as b}from"./tabs-C799l_wf.js";import{U as z}from"./user-Dzw_bBaf.js";import{B as E,F as L}from"./file-text-DzYFmHs2.js";import{T as y,a as P}from"./thumbs-up-CAmcogbq.js";import{C as f}from"./circle-check-big-Ch-vzTza.js";import{C as w}from"./circle-x-B_K9vFkc.js";import"./sheet-CSLi09mA.js";import"./index-B9BuyEyA.js";import"./index-HJxY0YWc.js";import"./check-BwcVDXgl.js";import"./circle-BUzwBHIX.js";import"./input-CJUNy1jx.js";import"./index-DKkfxeP0.js";import"./house-C-QCD7Aq.js";import"./search-D49h0e5u.js";import"./users-od6E47_0.js";import"./book-open-B9cXIgXU.js";import"./mail-nxhnwTHD.js";function le({auth:V,applications:u,stats:n}){const[h,v]=A.useState(null),j=(s,r)=>{confirm(`Are you sure you want to ${r} this application?`)&&(v(s),S.post(route("admin.applications.update-status",s),{status:r},{preserveScroll:!0,onFinish:()=>v(null)}))},C=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",shortlisted:"bg-blue-100 text-blue-800 border-blue-200",accepted:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",l={pending:u.filter(s=>s.status==="pending"),shortlisted:u.filter(s=>s.status==="shortlisted"),accepted:u.filter(s=>s.status==="accepted"),rejected:u.filter(s=>s.status==="rejected")},p=({application:s})=>{const r=s.tutor,t=s.job,c=t?.guardian;return e.jsxs(d,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(m,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{variant:"outline",className:C(s.status),children:s.status}),e.jsx(g,{variant:"secondary",children:new Date(s.applied_at).toLocaleDateString()})]}),e.jsxs(x,{className:"text-lg",children:["Application #",s.id]})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-sm text-blue-600 border-b pb-2",children:[e.jsx(z,{className:"inline h-4 w-4 mr-1"}),"Tutor Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"})," ",e.jsx("a",{href:route("admin.tutors.view",r?.id),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline",children:r?.user?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"})," ",e.jsx("span",{className:"font-medium",children:r?.user?.email})]}),r?.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",e.jsx("span",{className:"font-medium",children:r.phone})]}),r?.hourly_rate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expected Salary:"})," ",e.jsxs("span",{className:"font-medium text-green-600",children:["৳",r.hourly_rate,"/month"]})]}),r?.education&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Education:"})," ",e.jsx("span",{className:"font-medium",children:r.education})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Verification:"})," ",e.jsx(g,{variant:"outline",className:"ml-1 text-xs",children:r?.verification_status})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-sm text-green-600 border-b pb-2",children:[e.jsx(E,{className:"inline h-4 w-4 mr-1"}),"Job Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Title:"})," ",e.jsx("a",{href:route("admin.jobs.view",t?.id),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline",children:t?.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Code:"})," ",e.jsx("span",{className:"font-medium",children:t?.job_code})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Salary:"})," ",e.jsxs("span",{className:"font-medium text-green-600",children:["৳",t?.salary,"/month"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"})," ",e.jsx("span",{className:"font-medium",children:t?.preferred_location&&t?.district?`${t.preferred_location}, ${t.district}`:t?.district?t.district:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Posted By:"})," ",c?e.jsxs("span",{className:"font-medium",children:["Guardian:"," ",e.jsx("a",{href:route("admin.guardians.view",c.id),className:"text-blue-600 hover:text-blue-800 hover:underline",children:c.first_name||c.user?.name||"N/A"})]}):e.jsx("span",{className:"font-medium",children:"Admin"})]}),c?.user?.email&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Guardian Email:"})," ",e.jsx("span",{className:"font-medium",children:c.user.email})]})]})]})]}),s.cover_letter&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Cover Letter"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded",children:s.cover_letter})]}),s.status==="pending"&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex gap-2",children:[e.jsxs(o,{size:"sm",variant:"outline",className:"text-blue-600 border-blue-600 hover:bg-blue-50",onClick:()=>j(s.id,"shortlisted"),disabled:h===s.id,children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Shortlist"]}),e.jsxs(o,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>j(s.id,"accepted"),disabled:h===s.id,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsxs(o,{size:"sm",variant:"destructive",onClick:()=>j(s.id,"rejected"),disabled:h===s.id,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),s.status==="shortlisted"&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex gap-2",children:[e.jsxs(o,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>j(s.id,"accepted"),disabled:h===s.id,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsxs(o,{size:"sm",variant:"destructive",onClick:()=>j(s.id,"rejected"),disabled:h===s.id,children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),s.cv_path&&e.jsx("div",{className:"mt-3",children:e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>window.open(`/storage/${s.cv_path}`,"_blank"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"View CV"]})}),s.guardian_recommendations&&s.guardian_recommendations.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("h4",{className:"font-semibold text-sm text-purple-600 mb-3 flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Guardian Recommendations"]}),e.jsx("div",{className:"space-y-2",children:s.guardian_recommendations.map((a,_)=>e.jsxs("div",{className:`p-3 rounded-lg border ${a.recommendation_type==="hire"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[a.recommendation_type==="hire"?e.jsx(y,{className:"h-4 w-4 text-green-600"}):e.jsx(P,{className:"h-4 w-4 text-red-600"}),e.jsx(g,{variant:"outline",className:a.recommendation_type==="hire"?"bg-green-100 text-green-800 border-green-300":"bg-red-100 text-red-800 border-red-300",children:a.recommendation_type==="hire"?"Recommends Hire":"Not Interested"}),a.guardian&&e.jsxs("span",{className:"text-xs text-gray-600",children:["by ",a.guardian.first_name," ",a.guardian.last_name]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleDateString()})]}),a.message&&e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:a.message})]},_))})]})]})]})};return e.jsxs(k,{children:[e.jsx(T,{title:"Job Applications"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Job Applications"}),e.jsx("p",{className:"text-gray-600",children:"View all tutor applications to guardian jobs"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs(d,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Total"})}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.total})})]}),e.jsxs(d,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Pending"})}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.pending})})]}),e.jsxs(d,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Shortlisted"})}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.shortlisted})})]}),e.jsxs(d,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Accepted"})}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.accepted})})]}),e.jsxs(d,{children:[e.jsx(m,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Rejected"})}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.rejected})})]})]}),e.jsxs(D,{defaultValue:"pending",className:"space-y-4",children:[e.jsxs(R,{children:[e.jsxs(N,{value:"pending",className:"relative",children:["Pending",n.pending>0&&e.jsx(g,{className:"ml-2 bg-yellow-500",children:n.pending})]}),e.jsx(N,{value:"shortlisted",children:"Shortlisted"}),e.jsx(N,{value:"accepted",children:"Accepted"}),e.jsx(N,{value:"rejected",children:"Rejected"})]}),e.jsx(b,{value:"pending",className:"space-y-4",children:l.pending.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.pending.map(s=>e.jsx(p,{application:s},s.id))}):e.jsx(d,{children:e.jsx(i,{className:"text-center py-12 text-gray-500",children:"No pending applications"})})}),e.jsx(b,{value:"shortlisted",className:"space-y-4",children:l.shortlisted.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.shortlisted.map(s=>e.jsx(p,{application:s},s.id))}):e.jsx(d,{children:e.jsx(i,{className:"text-center py-12 text-gray-500",children:"No shortlisted applications"})})}),e.jsx(b,{value:"accepted",className:"space-y-4",children:l.accepted.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.accepted.map(s=>e.jsx(p,{application:s},s.id))}):e.jsx(d,{children:e.jsx(i,{className:"text-center py-12 text-gray-500",children:"No accepted applications"})})}),e.jsx(b,{value:"rejected",className:"space-y-4",children:l.rejected.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.rejected.map(s=>e.jsx(p,{application:s},s.id))}):e.jsx(d,{children:e.jsx(i,{className:"text-center py-12 text-gray-500",children:"No rejected applications"})})})]})]})})]})}export{le as default};
