import{r as w,j as e,H as C,a as A}from"./app-DvBjVBiq.js";import{A as T}from"./AuthenticatedLayout-BpLTeax-.js";import{C as t,a as n,b as m,c as a}from"./card-Cv20zNkG.js";import{B as x}from"./button-D78GArki.js";import{B as u}from"./badge-t35BXhJV.js";import{T as _,a as S,b as p,c as N}from"./tabs-BGTJol1Q.js";import{U as k}from"./user-twfyhSbf.js";import{B,F as z}from"./file-text-7h3AE9q6.js";import{T as E}from"./thumbs-up-BzuKpPsl.js";import{C as v}from"./circle-check-big-D9bL0hd6.js";import{C as f}from"./circle-x-nxUmWRJe.js";import"./sheet-DChk3iRr.js";import"./index-q50AiS3X.js";import"./index-Dprr2haP.js";import"./check-Dnjo-tIP.js";import"./circle--NTZZ6CK.js";import"./input-owfrPoiq.js";import"./index-B2P68d7Q.js";import"./house-CbNyQ-r7.js";import"./search-B8nUHUAo.js";import"./users-AJ8Cg7pc.js";import"./book-open-CISuMiZF.js";import"./mail-DnWs02vJ.js";function te({auth:L,applications:j,stats:i}){const[o,b]=w.useState(null),h=(s,r)=>{confirm(`Are you sure you want to ${r} this application?`)&&(b(s),A.post(route("admin.applications.update-status",s),{status:r},{preserveScroll:!0,onFinish:()=>b(null)}))},y=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",shortlisted:"bg-blue-100 text-blue-800 border-blue-200",accepted:"bg-green-100 text-green-800 border-green-200",rejected:"bg-red-100 text-red-800 border-red-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",l={pending:j.filter(s=>s.status==="pending"),shortlisted:j.filter(s=>s.status==="shortlisted"),accepted:j.filter(s=>s.status==="accepted"),rejected:j.filter(s=>s.status==="rejected")},g=({application:s})=>{const r=s.tutor,d=s.job,c=d?.guardian;return e.jsxs(t,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{variant:"outline",className:y(s.status),children:s.status}),e.jsx(u,{variant:"secondary",children:new Date(s.applied_at).toLocaleDateString()})]}),e.jsxs(m,{className:"text-lg",children:["Application #",s.id]})]}),e.jsxs(a,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-sm text-blue-600 border-b pb-2",children:[e.jsx(k,{className:"inline h-4 w-4 mr-1"}),"Tutor Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"})," ",e.jsx("a",{href:route("admin.tutors.view",r?.id),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline",children:r?.user?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"})," ",e.jsx("span",{className:"font-medium",children:r?.user?.email})]}),r?.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"})," ",e.jsx("span",{className:"font-medium",children:r.phone})]}),r?.hourly_rate&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expected Salary:"})," ",e.jsxs("span",{className:"font-medium text-green-600",children:["৳",r.hourly_rate,"/month"]})]}),r?.education&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Education:"})," ",e.jsx("span",{className:"font-medium",children:r.education})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Verification:"})," ",e.jsx(u,{variant:"outline",className:"ml-1 text-xs",children:r?.verification_status})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold text-sm text-green-600 border-b pb-2",children:[e.jsx(B,{className:"inline h-4 w-4 mr-1"}),"Job Details"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Title:"})," ",e.jsx("a",{href:route("admin.jobs.view",d?.id),className:"font-medium text-blue-600 hover:text-blue-800 hover:underline",children:d?.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Code:"})," ",e.jsx("span",{className:"font-medium",children:d?.job_code})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Salary:"})," ",e.jsxs("span",{className:"font-medium text-green-600",children:["৳",d?.salary,"/month"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"})," ",e.jsx("span",{className:"font-medium",children:d?.district&&d?.division?`${d.district}, ${d.division}`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Posted By:"})," ",c?e.jsxs("span",{className:"font-medium",children:["Guardian:"," ",e.jsx("a",{href:route("admin.guardians.view",c.id),className:"text-blue-600 hover:text-blue-800 hover:underline",children:c.first_name||c.user?.name||"N/A"})]}):e.jsx("span",{className:"font-medium",children:"Admin"})]}),c?.user?.email&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Guardian Email:"})," ",e.jsx("span",{className:"font-medium",children:c.user.email})]})]})]})]}),s.cover_letter&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Cover Letter"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded",children:s.cover_letter})]}),s.status==="pending"&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex gap-2",children:[e.jsxs(x,{size:"sm",variant:"outline",className:"text-blue-600 border-blue-600 hover:bg-blue-50",onClick:()=>h(s.id,"shortlisted"),disabled:o===s.id,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Shortlist"]}),e.jsxs(x,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>h(s.id,"accepted"),disabled:o===s.id,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsxs(x,{size:"sm",variant:"destructive",onClick:()=>h(s.id,"rejected"),disabled:o===s.id,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),s.status==="shortlisted"&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex gap-2",children:[e.jsxs(x,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>h(s.id,"accepted"),disabled:o===s.id,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Accept"]}),e.jsxs(x,{size:"sm",variant:"destructive",onClick:()=>h(s.id,"rejected"),disabled:o===s.id,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),s.cv_path&&e.jsx("div",{className:"mt-3",children:e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>window.open(`/storage/${s.cv_path}`,"_blank"),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"View CV"]})})]})]})};return e.jsxs(T,{children:[e.jsx(C,{title:"Job Applications"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Job Applications"}),e.jsx("p",{className:"text-gray-600",children:"View all tutor applications to guardian jobs"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs(t,{children:[e.jsx(n,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Total"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold",children:i.total})})]}),e.jsxs(t,{children:[e.jsx(n,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Pending"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.pending})})]}),e.jsxs(t,{children:[e.jsx(n,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Shortlisted"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.shortlisted})})]}),e.jsxs(t,{children:[e.jsx(n,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Accepted"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.accepted})})]}),e.jsxs(t,{children:[e.jsx(n,{className:"pb-3",children:e.jsx(m,{className:"text-sm font-medium text-gray-600",children:"Rejected"})}),e.jsx(a,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.rejected})})]})]}),e.jsxs(_,{defaultValue:"pending",className:"space-y-4",children:[e.jsxs(S,{children:[e.jsxs(p,{value:"pending",className:"relative",children:["Pending",i.pending>0&&e.jsx(u,{className:"ml-2 bg-yellow-500",children:i.pending})]}),e.jsx(p,{value:"shortlisted",children:"Shortlisted"}),e.jsx(p,{value:"accepted",children:"Accepted"}),e.jsx(p,{value:"rejected",children:"Rejected"})]}),e.jsx(N,{value:"pending",className:"space-y-4",children:l.pending.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.pending.map(s=>e.jsx(g,{application:s},s.id))}):e.jsx(t,{children:e.jsx(a,{className:"text-center py-12 text-gray-500",children:"No pending applications"})})}),e.jsx(N,{value:"shortlisted",className:"space-y-4",children:l.shortlisted.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.shortlisted.map(s=>e.jsx(g,{application:s},s.id))}):e.jsx(t,{children:e.jsx(a,{className:"text-center py-12 text-gray-500",children:"No shortlisted applications"})})}),e.jsx(N,{value:"accepted",className:"space-y-4",children:l.accepted.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.accepted.map(s=>e.jsx(g,{application:s},s.id))}):e.jsx(t,{children:e.jsx(a,{className:"text-center py-12 text-gray-500",children:"No accepted applications"})})}),e.jsx(N,{value:"rejected",className:"space-y-4",children:l.rejected.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.rejected.map(s=>e.jsx(g,{application:s},s.id))}):e.jsx(t,{children:e.jsx(a,{className:"text-center py-12 text-gray-500",children:"No rejected applications"})})})]})]})})]})}export{te as default};
